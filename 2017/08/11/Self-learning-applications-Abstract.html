<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Self learning applications</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Self learning applications">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Self learning applications">
    <meta property="og:description" content="">

    <!-- <meta name="twitter:site" content="">

<meta name="twitter:creator" content="">

<meta name="google-site-verification" content="">

<meta property="fb:admins" content="">
 -->

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link href="//fonts.googleapis.com/" rel="dns-prefetch">
    <link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400&subset=latin,latin-ext" rel="stylesheet">

    <link rel="stylesheet" href="//egorlitvinenko.github.io/themes/ghostium/assets/css/main.min.css?v=1503752157089"/>
    <link rel="stylesheet" href="//egorlitvinenko.github.io/themes/ghostium/assets/css/custom.css?v=1503752157089"/>
    <link rel="stylesheet" href="//egorlitvinenko.github.io/themes/ghostium/assets/css/asciidoctor-foundation.css?v=1503752157089"/>




    <script type="text/javascript">
      var ga_ua = 'UA-XXXXX-X';
      
      var disqus_shortname = 'example';
      
      var enable_pjax = true;

      // Pace Options
      // ==============
      window.paceOptions = {
        catchupTime: 100,
        minTime: 100,
        elements: false,
        restartOnRequestAfter: 500,
        startOnPageLoad: false
      }

      // Ghostium Globals
      // ==============
      window.GHOSTIUM = {};
      GHOSTIUM.haveGA = typeof ga_ua !== 'undefined' && ga_ua !== 'UA-XXXXX-X';
      GHOSTIUM.haveDisqus = typeof disqus_shortname !== 'undefined' && disqus_shortname !== 'example';
      GHOSTIUM.enablePjax = typeof enable_pjax !== 'undefined' ? enable_pjax : true;
    </script>

    <script src="//egorlitvinenko.github.io/themes/ghostium/assets/js/head-scripts.min.js?v=1503752157089"></script>

    <link rel="canonical" href="https://egorlitvinenko.github.io/2017/08/11/Self-learning-applications-Abstract.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Egor Litvinenko" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Self learning applications" />
    <meta property="og:description" content="Status: Article in progress Prehistory What is your batch size? When I did tests for parsing csv and write to CH (now on Github), I saw that I have some variables: ring buffer size and batch size of Clickhouse driver, which I don’t know apriory, because ring buffer size" />
    <meta property="og:url" content="https://egorlitvinenko.github.io/2017/08/11/Self-learning-applications-Abstract.html" />
    <meta property="article:published_time" content="2017-08-11T00:00:00.000Z" />
    <meta property="article:tag" content="Machine learning" />
    <meta property="article:tag" content="optimization" />
    <meta property="article:tag" content="software engineering" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Self learning applications" />
    <meta name="twitter:description" content="Status: Article in progress Prehistory What is your batch size? When I did tests for parsing csv and write to CH (now on Github), I saw that I have some variables: ring buffer size and batch size of Clickhouse driver, which I don’t know apriory, because ring buffer size" />
    <meta name="twitter:url" content="https://egorlitvinenko.github.io/2017/08/11/Self-learning-applications-Abstract.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Egor Litvinenko",
    "author": {
        "@type": "Person",
        "name": "Egor",
        "image": "https://avatars1.githubusercontent.com/u/18114282?v=4",
        "url": "https://egorlitvinenko.github.io/author/egorlitvinenko/",
        "sameAs": "https://stackoverflow.com/cv/egorlitvinenko",
        "description": "Senior software developer"
    },
    "headline": "Self learning applications",
    "url": "https://egorlitvinenko.github.io/2017/08/11/Self-learning-applications-Abstract.html",
    "datePublished": "2017-08-11T00:00:00.000Z",
    "keywords": "Machine learning, optimization, software engineering",
    "description": "Status: Article in progress Prehistory What is your batch size? When I did tests for parsing csv and write to CH (now on Github), I saw that I have some variables: ring buffer size and batch size of Clickhouse driver, which I don’t know apriory, because ring buffer size"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Egor Litvinenko" href="https://egorlitvinenko.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
  </head>
  <body class="post-template tag-Machine-learning tag-optimization tag-software-engineering">

    <button data-action="open-drawer" id="drawer-button" class="drawer-button"><i class="fa fa-bars"></i></button>
    <nav tabindex="-1" class="drawer">
      <div class="drawer-container">
        <!--.drawer-search(role="search")-->
        <ul role="navigation" class="drawer-list">
          
          <li class="drawer-list-item">
            <a href="https://egorlitvinenko.github.io" data-pjax>
              <i class="fa fa-home"></i>Home
            </a>
          </li>
          <!-- <li class="drawer-list-item">
            <a href="https://egorlitvinenko.github.io" title="Egor Litvinenko" data-pjax>
              <i class="fa fa-list-alt"></i>All posts
            </a>
          </li> -->
          <li class="drawer-list-item">
            <a href="https://egorlitvinenko.github.io/rss/">
              <i class="fa fa-rss"></i>Subscribe to Feed
            </a>
          </li>
          <li class="drawer-list-divider"></li>
          <li class="drawer-list-item drawer-list-title">
            Follow me
          </li>
          
          
          <li class="drawer-list-item">
            <a href="https://github.com/egorlitvinenko" title="Github" target="_blank">
              <i class="fa fa-github"></i>Github
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="https://www.facebook.com/egor.litvinenko" title="Facebook" target="_blank">
              <i class="fa fa-facebook"></i>Facebook
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="https://www.linkedin.com/in/egorlitvinenko/" title="LinkedIn" target="_blank">
              <i class="fa fa-linkedin"></i>LinkedIn
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="mailto:e.v.litvinenko.1@gmail.com" title="Email" target="_blank">
              <i class="fa fa-envelope-o"></i>Email
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="drawer-overlay"></div>
    <main id="container" role="main" class="container">
      <div class="surface">
        <div class="surface-container">
          <div data-pjax-container class="content">
            
<section class="wrapper wrapper-post">
  <div class="wrapper-container">
    <article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post post tag-Machine-learning tag-optimization tag-software-engineering">
        <section class="post-container">
          <header class="post-header">
            <ul class="post-meta-list">
              <li class="post-meta-item">
                <time datetime="2017-08-11" itemprop="datePublished">
                  16 days ago
                </time>
              </li>
                <li class="post-meta-item">
                  <span class="tags"><i class="fa fa-tags"></i>
                      <span>
                      <a href="https://egorlitvinenko.github.io/tag/Machine-learning/">Machine learning</a>, <a href="https://egorlitvinenko.github.io/tag/optimization/">optimization</a>, <a href="https://egorlitvinenko.github.io/tag/software-engineering/">software engineering</a></span>
                  </span>
                </li>
              <li class="post-meta-item">
                <a href="#disqus_thread" data-disqus-identifier="">Comments</a>
              </li>
            </ul>
            <h1 itemprop="name headline" class="post-title"><a href="https://egorlitvinenko.github.io/2017/08/11/Self-learning-applications-Abstract.html" itemprop="url" data-pjax title="Self learning applications">Self learning applications</a></h1>
            <!--h2 itemprop="about" class="post-subtitle"></h2-->
          </header>
          <aside class="post-side">
            <div class="post-author">
                <a href="https://stackoverflow.com/cv/egorlitvinenko" class="post-author-avatar">
                  <img src="https://avatars1.githubusercontent.com/u/18114282?v&#x3D;4" alt="Egor">
                </a>
              <div class="post-author-info">
                <a href="https://stackoverflow.com/cv/egorlitvinenko" class="post-author-name">
                  Egor
                </a>
                <p class="post-author-bio">Senior software developer</p>
              </div>
            </div>
          </aside>
          <div itemprop="articleBody" class="post-body">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Status: Article in progress</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_prehistory">Prehistory</h3>
<div class="paragraph">
<p>What is your batch size? When I did tests for parsing csv and write to CH (now on <a href="https://github.com/egorlitvinenko/testparsing">Github</a>), I saw that I have some variables: ring buffer size and batch size of Clickhouse driver, which I don’t know apriory, because ring buffer size is a <a href="https://github.com/LMAX-Exchange/disruptor/wiki/Frequently-Asked-Questions">CPU L3 cache size</a> and batch size depends on many factors, even on my laptop it could be changed depends on logging settings. And I realized that we could have another familly of applications, which should define their parameters dynamically at runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="_think_about_it">Think about it</h3>
<div class="paragraph">
<p>Let’s imagine what does influence on batch size of application?
If your database is remote, then it is at least network connection. If your database is local, then it is disk speed. What else? You also could mention branch predictions, cache coherence, false sharing and other effects reffered to multithreading processing, where batches decrease thread switches. What else? If you use compressing to reduce IO you should find batch size as a golden middle between CPU load and compressing. Or just row size. Really, when we set batch size we don’t think about that, generally. There are many effects and reasons.
And all of them could be changed from x86 to x64 or PowerPC, or from node to node, or even on one node by different performance profile and load.</p>
</div>
<div class="paragraph">
<p>Batch size is only one variable. For instance, if we create parsing application, which read file → parse → write to database in multiple threads (typically two threads with pipe streams), there will new parameters – queue sizes for threads. So we could have a set of parameters, which influence on one big task.</p>
</div>
<div class="paragraph">
<p>So who know what should batch size equal? The only answer is runtime. Moreover, theoretically runtime could determine what batch size is best in particular scenarious (when we have different load on server, for instnace).</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_we_have">What we have?</h3>
<div class="paragraph">
<p>In modern live it makes sense to suppose that someone already did it for us. I found this articles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.computerworld.com/article/2560247/app-development/self-taught&#8212;&#8203;software-that-learns-by-doing.html" class="bare">http://www.computerworld.com/article/2560247/app-development/self-taught&#8212;&#8203;software-that-learns-by-doing.html</a></p>
</li>
<li>
<p><a href="https://www.forbes.com/sites/teradata/2015/04/08/the-holy-grail-of-business-automation-self-learning-applications/#23e57971982f" class="bare">https://www.forbes.com/sites/teradata/2015/04/08/the-holy-grail-of-business-automation-self-learning-applications/#23e57971982f</a></p>
</li>
<li>
<p><a href="https://www.forbes.com/sites/teradata/2015/03/06/need-new-business-insights-listen-to-your-things/#4f2cc59a743e" class="bare">https://www.forbes.com/sites/teradata/2015/03/06/need-new-business-insights-listen-to-your-things/#4f2cc59a743e</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They talk about IoT and something close, but not the same. The difference is above articles are about collecting data from devices, and I’m talking about application. Maybe from some point of view is the same, because I also mean that we have some device (computer), where we run application and collect feedbacks. But the main difference is it’s not about machines only. People also could participate in this process. Also in practice it could be not about “big data”. For big data we need a lot of experiments, and our dynamic algorithms should be responsive enough and appropriate even we don&#8217;t have too much collected data.
From the other side there are many runtime optimizations in JIT and HotSpot too, but this article about higher layer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_algorithm">Algorithm</h3>
<div class="paragraph">
<p>Let’s describe simple model, which will represent and solve the task of batch size (from the start).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://egorlitvinenko.github.io/images/SelfLearningApp-Sequence.png" alt="SelfLearningApp Sequence.png">
</div>
</div>
</div>
          </div>
          <footer class="post-footer">
            <div itemprop="author" itemscope itemtype="http://schema.org/Person" class="post-author">
                <a href="https://stackoverflow.com/cv/egorlitvinenko" class="post-author-avatar">
                  <img itemprop="image" src="https://avatars1.githubusercontent.com/u/18114282?v&#x3D;4" alt="Egor">
                </a>
              <div class="post-author-info">
                <h4 class="post-footer-heading">Written By</h4>
                <a href="https://stackoverflow.com/cv/egorlitvinenko" itemprop="url" class="post-author-name">
                  <span itemprop="name">Egor</span>
                </a>
                <p itemprop="description" class="post-author-bio">Senior software developer</p>
                  <p class="post-author-location">Krasnodar, Russia</p>
                  <p class="post-author-website">
                    <a href="https://stackoverflow.com/cv/egorlitvinenko" rel="nofollow">https://stackoverflow.com/cv/egorlitvinenko</a>
                  </p>
                <p class="post-info">
                  <b class="post-info-title">Published on</b>
                  <time class="post-date">August 11, 2017</time>
                </p>
              </div>
            </div>
            <div class="post-social">
              <h4 class="post-footer-heading">Spread the word</h4>
              <a href="#" data-action="share-twitter"><i class="fa fa-fw fa-lg fa-twitter"></i></a>
              <a href="#" data-action="share-facebook"><i class="fa fa-fw fa-lg fa-facebook"></i></a>
              <a href="#" data-action="share-gplus"><i class="fa fa-fw fa-lg fa-google-plus"></i></a>
            </div>
          </footer>
        </section>
      <section itemprop="comment" class="post-comments">
        <div id="disqus_thread"></div>
      </section>
    </article>

    <footer role="contentinfo" class="footer">
      <p><small>Copyright &copy; <span itemprop="copyrightHolder">Egor Litvinenko</span>. 2017. All Rights Reserved.</small></p>
      <p><small><a href="http://ghostium.oswaldoacauan.com/" target="_blank">Ghostium Theme</a> by <a href="http://twitter.com/oswaldoacauan" target="_blank">@oswaldoacauan</a></small></p>
      <p><small>Adapted by <a href="https://twitter.com/mgreau">Maxime Gréau</a></small></p>
      <p><small>Published with <a href="http://hubpress.io">HubPress</a></small></p>
    </footer>
  </div>
</section>


<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
  var disqus_shortname = 'egorlitvinenko'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


          </div>
        </div>
      </div>
    </main>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
       
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <script src="//egorlitvinenko.github.io/themes/ghostium/assets/js/foot-scripts.min.js?v=1503752157089"></script>


  </body>
</html>
